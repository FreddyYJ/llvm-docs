<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::VPlanTransforms Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;20.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="structllvm_1_1VPlanTransforms.html">VPlanTransforms</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="structllvm_1_1VPlanTransforms-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">llvm::VPlanTransforms Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="VPlanTransforms_8h_source.html">Transforms/Vectorize/VPlanTransforms.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad210afaefb4884ac5008dd5fbaf1cbf8" id="r_ad210afaefb4884ac5008dd5fbaf1cbf8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad210afaefb4884ac5008dd5fbaf1cbf8">VPInstructionsToVPRecipes</a> (<a class="el" href="namespacellvm.html#aefc42f3cefc5a839ca925b4cb3ae4a7b">VPlanPtr</a> &amp;Plan, <a class="el" href="classllvm_1_1function__ref.html">function_ref</a>&lt; <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> *(<a class="el" href="classllvm_1_1PHINode.html">PHINode</a> *)&gt; GetIntOrFpInductionDescriptor, <a class="el" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI)</td></tr>
<tr class="memdesc:ad210afaefb4884ac5008dd5fbaf1cbf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replaces the VPInstructions in <code>Plan</code> with corresponding widen recipes.  <br /></td></tr>
<tr class="separator:ad210afaefb4884ac5008dd5fbaf1cbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae64d6953a1334207d9e7d9cd2587ee9f" id="r_ae64d6953a1334207d9e7d9cd2587ee9f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae64d6953a1334207d9e7d9cd2587ee9f">adjustFixedOrderRecurrences</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="el" href="classllvm_1_1VPBuilder.html">VPBuilder</a> &amp;Builder)</td></tr>
<tr class="memdesc:ae64d6953a1334207d9e7d9cd2587ee9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sink users of fixed-order recurrences after the recipe defining their previous value.  <br /></td></tr>
<tr class="separator:ae64d6953a1334207d9e7d9cd2587ee9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace9e1e6e7295914973dec18350b382ca" id="r_ace9e1e6e7295914973dec18350b382ca"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ace9e1e6e7295914973dec18350b382ca">clearReductionWrapFlags</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan)</td></tr>
<tr class="memdesc:ace9e1e6e7295914973dec18350b382ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear NSW/NUW flags from reduction instructions if necessary.  <br /></td></tr>
<tr class="separator:ace9e1e6e7295914973dec18350b382ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a1cca51bb9bce4efad1063dcf158967" id="r_a7a1cca51bb9bce4efad1063dcf158967"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a1cca51bb9bce4efad1063dcf158967">unrollByUF</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="el" href="classunsigned.html">unsigned</a> UF, <a class="el" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx)</td></tr>
<tr class="memdesc:a7a1cca51bb9bce4efad1063dcf158967"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicitly unroll <code>Plan</code> by <code>UF</code>.  <br /></td></tr>
<tr class="separator:a7a1cca51bb9bce4efad1063dcf158967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25d938764b8634e70e95ff3f0c35129" id="r_af25d938764b8634e70e95ff3f0c35129"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af25d938764b8634e70e95ff3f0c35129">optimizeForVFAndUF</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="el" href="classllvm_1_1ElementCount.html">ElementCount</a> BestVF, <a class="el" href="classunsigned.html">unsigned</a> BestUF, <a class="el" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;PSE)</td></tr>
<tr class="memdesc:af25d938764b8634e70e95ff3f0c35129"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimize <code>Plan</code> based on <code>BestVF</code> and <code>BestUF</code>.  <br /></td></tr>
<tr class="separator:af25d938764b8634e70e95ff3f0c35129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3449b993cd1c459995c2fe13ef50892" id="r_ae3449b993cd1c459995c2fe13ef50892"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3449b993cd1c459995c2fe13ef50892">optimize</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan)</td></tr>
<tr class="memdesc:ae3449b993cd1c459995c2fe13ef50892"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply VPlan-to-VPlan optimizations to <code>Plan</code>, including induction recipe optimizations, dead recipe removal, replicate region optimizations and block merging.  <br /></td></tr>
<tr class="separator:ae3449b993cd1c459995c2fe13ef50892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42d43068c576be2a1cd514f620246004" id="r_a42d43068c576be2a1cd514f620246004"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42d43068c576be2a1cd514f620246004">createAndOptimizeReplicateRegions</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan)</td></tr>
<tr class="memdesc:a42d43068c576be2a1cd514f620246004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrap predicated VPReplicateRecipes with a mask operand in an if-then region block and remove the mask operand.  <br /></td></tr>
<tr class="separator:a42d43068c576be2a1cd514f620246004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1d2d60cd9edd9f7ca98c50789747c95" id="r_ae1d2d60cd9edd9f7ca98c50789747c95"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1d2d60cd9edd9f7ca98c50789747c95">addActiveLaneMask</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="el" href="classbool.html">bool</a> UseActiveLaneMaskForControlFlow, <a class="el" href="classbool.html">bool</a> <a class="el" href="namespacellvm.html#ada31142763d41520644d228c139a4bdda41105c5fe36c41d2246b18c1724fa2ff">DataAndControlFlowWithoutRuntimeCheck</a>)</td></tr>
<tr class="memdesc:ae1d2d60cd9edd9f7ca98c50789747c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replace (ICMP_ULE, wide canonical IV, backedge-taken-count) checks with an (active-lane-mask recipe, wide canonical IV, trip-count).  <br /></td></tr>
<tr class="separator:ae1d2d60cd9edd9f7ca98c50789747c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61793492431f138869f097a5f31bd32" id="r_ae61793492431f138869f097a5f31bd32"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae61793492431f138869f097a5f31bd32">truncateToMinimalBitwidths</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1MapVector.html">MapVector</a>&lt; <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="el" href="classuint64__t.html">uint64_t</a> &gt; &amp;MinBWs)</td></tr>
<tr class="memdesc:ae61793492431f138869f097a5f31bd32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert truncates and extends for any truncated recipe.  <br /></td></tr>
<tr class="separator:ae61793492431f138869f097a5f31bd32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f143b8d4693978b984f0639c90e508" id="r_aa0f143b8d4693978b984f0639c90e508"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0f143b8d4693978b984f0639c90e508">dropPoisonGeneratingRecipes</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan, <a class="el" href="classllvm_1_1function__ref.html">function_ref</a>&lt; <a class="el" href="classbool.html">bool</a>(<a class="el" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *)&gt; BlockNeedsPredication)</td></tr>
<tr class="memdesc:aa0f143b8d4693978b984f0639c90e508"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop poison flags from recipes that may generate a poison value that is used after vectorization, even when their operands are not poison.  <br /></td></tr>
<tr class="separator:aa0f143b8d4693978b984f0639c90e508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b8c570e70b203b954d1240f3abfc8f" id="r_a00b8c570e70b203b954d1240f3abfc8f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00b8c570e70b203b954d1240f3abfc8f">tryAddExplicitVectorLength</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan)</td></tr>
<tr class="memdesc:a00b8c570e70b203b954d1240f3abfc8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="classllvm_1_1VPEVLBasedIVPHIRecipe.html" title="A recipe for generating the phi node for the current index of elements, adjusted in accordance with E...">VPEVLBasedIVPHIRecipe</a> and related recipes to <code>Plan</code> and replaces all uses except the canonical IV increment of <a class="el" href="classllvm_1_1VPCanonicalIVPHIRecipe.html" title="Canonical scalar induction phi of the vector loop.">VPCanonicalIVPHIRecipe</a> with a <a class="el" href="classllvm_1_1VPEVLBasedIVPHIRecipe.html" title="A recipe for generating the phi node for the current index of elements, adjusted in accordance with E...">VPEVLBasedIVPHIRecipe</a>.  <br /></td></tr>
<tr class="separator:a00b8c570e70b203b954d1240f3abfc8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40dd8c3f756d91e5e9f47006b0c1e7b9" id="r_a40dd8c3f756d91e5e9f47006b0c1e7b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40dd8c3f756d91e5e9f47006b0c1e7b9">createInterleaveGroups</a> (<a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl</a>&lt; <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup</a>&lt; <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &gt; * &gt; &amp;InterleaveGroups, <a class="el" href="classllvm_1_1VPRecipeBuilder.html">VPRecipeBuilder</a> &amp;RecipeBuilder, <a class="el" href="classbool.html">bool</a> ScalarEpilogueAllowed)</td></tr>
<tr class="separator:a40dd8c3f756d91e5e9f47006b0c1e7b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca9dd97d4c523d8c65274654abe4eb9" id="r_aaca9dd97d4c523d8c65274654abe4eb9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaca9dd97d4c523d8c65274654abe4eb9">removeDeadRecipes</a> (<a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;Plan)</td></tr>
<tr class="memdesc:aaca9dd97d4c523d8c65274654abe4eb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove dead recipes from <code>Plan</code>.  <br /></td></tr>
<tr class="separator:aaca9dd97d4c523d8c65274654abe4eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8h_source.html#l00030">30</a> of file <a class="el" href="VPlanTransforms_8h_source.html">VPlanTransforms.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae1d2d60cd9edd9f7ca98c50789747c95" name="ae1d2d60cd9edd9f7ca98c50789747c95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1d2d60cd9edd9f7ca98c50789747c95">&#9670;&#160;</a></span>addActiveLaneMask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::addActiveLaneMask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>UseActiveLaneMaskForControlFlow</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>DataAndControlFlowWithoutRuntimeCheck</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replace (ICMP_ULE, wide canonical IV, backedge-taken-count) checks with an (active-lane-mask recipe, wide canonical IV, trip-count). </p>
<p>If <code>UseActiveLaneMaskForControlFlow</code> is true, introduce an <a class="el" href="classllvm_1_1VPActiveLaneMaskPHIRecipe.html" title="A recipe for generating the active lane mask for the vector loop that is used to predicate the vector...">VPActiveLaneMaskPHIRecipe</a>. If <code>DataAndControlFlowWithoutRuntimeCheck</code> is true, no minimum-iteration runtime check will be created (during skeleton creation) and instead it is handled using active-lane-mask. <code>DataAndControlFlowWithoutRuntimeCheck</code> implies <code>UseActiveLaneMaskForControlFlow</code>. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l01319">1319</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="VPlan_8h_source.html#l01226">llvm::VPInstruction::ActiveLaneMask</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l01203">addVPLaneMaskPhiAndUpdateExitBranch()</a>, <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="BuiltinGCs_8cpp.html#a11d755651840a5529d15260aacde92f3">B</a>, <a class="el" href="Casting_8h_source.html#l00565">llvm::cast()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l01278">collectAllHeaderMasks()</a>, <a class="el" href="namespacellvm.html#ada31142763d41520644d228c139a4bdda41105c5fe36c41d2246b18c1724fa2ff">llvm::DataAndControlFlowWithoutRuntimeCheck</a>, <a class="el" href="STLExtras_8h_source.html#l01750">llvm::find_if()</a>, <a class="el" href="VPlan_8h_source.html#l03674">llvm::VPlan::getCanonicalIV()</a>, <a class="el" href="LoopVectorizationPlanner_8h_source.html#l00087">llvm::VPBuilder::getToInsertAfter()</a>, <a class="el" href="VPlan_8h_source.html#l03562">llvm::VPlan::getTripCount()</a>, <a class="el" href="VPlan_8cpp_source.html#l01457">llvm::VPValue::replaceAllUsesWith()</a>, and <a class="el" href="VPlanValue_8h_source.html#l00132">llvm::VPValue::users()</a>.</p>

</div>
</div>
<a id="ae64d6953a1334207d9e7d9cd2587ee9f" name="ae64d6953a1334207d9e7d9cd2587ee9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae64d6953a1334207d9e7d9cd2587ee9f">&#9670;&#160;</a></span>adjustFixedOrderRecurrences()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> VPlanTransforms::adjustFixedOrderRecurrences </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPBuilder.html">VPBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Builder</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sink users of fixed-order recurrences after the recipe defining their previous value. </p>
<p>Then introduce FirstOrderRecurrenceSplice VPInstructions to combine the value from the recurrence phis and previous values. The current implementation assumes all users can be sunk after the previous value, which is enforced by earlier legality checks. </p><dl class="section return"><dt>Returns</dt><dd>true if all users of fixed-order recurrences could be re-arranged as needed or false if it is not possible. In the latter case, <code>Plan</code> is not valid. </dd></dl>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l00774">774</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="Casting_8h_source.html#l00565">llvm::cast()</a>, <a class="el" href="LoopVectorizationPlanner_8h_source.html#l00145">llvm::VPBuilder::createNaryOp()</a>, <a class="el" href="Casting_8h_source.html#l00649">llvm::dyn_cast()</a>, <a class="el" href="Casting_8h_source.html#l00759">llvm::dyn_cast_or_null()</a>, <a class="el" href="VPlan_8h_source.html#l01220">llvm::VPInstruction::FirstOrderRecurrenceSplice</a>, <a class="el" href="VPlan_8h_source.html#l03386">llvm::VPRegionBlock::getEntry()</a>, <a class="el" href="VPlan_8cpp_source.html#l00161">llvm::VPBlockBase::getEntryBasicBlock()</a>, <a class="el" href="VPlan_8cpp_source.html#l00218">llvm::VPBasicBlock::getFirstNonPhi()</a>, <a class="el" href="ilist__node_8h_source.html#l00132">llvm::ilist_node_impl&lt; OptionsT &gt;::getIterator()</a>, <a class="el" href="VPlan_8h_source.html#l00755">llvm::VPRecipeBase::getParent()</a>, <a class="el" href="VPlan_8h_source.html#l03666">llvm::VPlan::getVectorLoopRegion()</a>, <a class="el" href="SmallPtrSet_8h_source.html#l00367">llvm::SmallPtrSetImpl&lt; PtrType &gt;::insert()</a>, <a class="el" href="Casting_8h_source.html#l00548">llvm::isa()</a>, <a class="el" href="VPlan_8h_source.html#l03249">llvm::VPBasicBlock::phis()</a>, <a class="el" href="SmallVector_8h_source.html#l00413">llvm::SmallVectorTemplateBase&lt; T, bool &gt;::push_back()</a>, <a class="el" href="GenericDomTree_8h_source.html#l00841">llvm::DominatorTreeBase&lt; NodeT, IsPostDom &gt;::recalculate()</a>, <a class="el" href="LoopVectorizationPlanner_8h_source.html#l00123">llvm::VPBuilder::setInsertPoint()</a>, and <a class="el" href="VPlanTransforms_8cpp_source.html#l00719">sinkRecurrenceUsersAfterPrevious()</a>.</p>

</div>
</div>
<a id="ace9e1e6e7295914973dec18350b382ca" name="ace9e1e6e7295914973dec18350b382ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace9e1e6e7295914973dec18350b382ca">&#9670;&#160;</a></span>clearReductionWrapFlags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::clearReductionWrapFlags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear NSW/NUW flags from reduction instructions if necessary. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l00833">833</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">llvm::Add</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00821">collectUsersRecursively()</a>, <a class="el" href="Casting_8h_source.html#l00649">llvm::dyn_cast()</a>, <a class="el" href="VPlan_8cpp_source.html#l00161">llvm::VPBlockBase::getEntryBasicBlock()</a>, <a class="el" href="IVDescriptors_8h_source.html#l00193">llvm::RecurrenceDescriptor::getRecurrenceKind()</a>, <a class="el" href="VPlan_8h_source.html#l03666">llvm::VPlan::getVectorLoopRegion()</a>, <a class="el" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">llvm::Mul</a>, and <a class="el" href="VPlan_8h_source.html#l03249">llvm::VPBasicBlock::phis()</a>.</p>

</div>
</div>
<a id="a42d43068c576be2a1cd514f620246004" name="a42d43068c576be2a1cd514f620246004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42d43068c576be2a1cd514f620246004">&#9670;&#160;</a></span>createAndOptimizeReplicateRegions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::createAndOptimizeReplicateRegions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrap predicated VPReplicateRecipes with a mask operand in an if-then region block and remove the mask operand. </p>
<p>Optimize the created regions by iteratively sinking scalar operands into the region, followed by merging regions until no improvements are remaining. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l00407">407</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="VPlanTransforms_8cpp_source.html#l00344">addReplicateRegions()</a>, <a class="el" href="LoopSimplifyCFG_8cpp_source.html#l00660">mergeBlocksIntoPredecessors()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00221">mergeReplicateRegionsIntoSuccessors()</a>, and <a class="el" href="VPlanTransforms_8cpp_source.html#l00109">sinkScalarOperands()</a>.</p>

<p class="reference">Referenced by <a class="el" href="VPlanTransforms_8cpp_source.html#l01155">optimize()</a>.</p>

</div>
</div>
<a id="a40dd8c3f756d91e5e9f47006b0c1e7b9" name="a40dd8c3f756d91e5e9f47006b0c1e7b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40dd8c3f756d91e5e9f47006b0c1e7b9">&#9670;&#160;</a></span>createInterleaveGroups()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::createInterleaveGroups </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl</a>&lt; <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1InterleaveGroup.html">InterleaveGroup</a>&lt; <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &gt; * &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>InterleaveGroups</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPRecipeBuilder.html">VPRecipeBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>RecipeBuilder</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>ScalarEpilogueAllowed</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l01592">1592</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="Casting_8h_source.html#l00565">llvm::cast()</a>, <a class="el" href="Casting_8h_source.html#l00759">llvm::dyn_cast_or_null()</a>, <a class="el" href="VPlanRecipes_8cpp_source.html#l00261">llvm::VPRecipeBase::eraseFromParent()</a>, <a class="el" href="VPRecipeBuilder_8h_source.html#l00158">llvm::VPRecipeBuilder::getRecipe()</a>, <a class="el" href="VPlanValue_8h_source.html#l00397">llvm::VPDef::getVPSingleValue()</a>, <a class="el" href="SmallVector_8h_source.html#l00413">llvm::SmallVectorTemplateBase&lt; T, bool &gt;::push_back()</a>, and <a class="el" href="VPlan_8cpp_source.html#l01457">llvm::VPValue::replaceAllUsesWith()</a>.</p>

</div>
</div>
<a id="aa0f143b8d4693978b984f0639c90e508" name="aa0f143b8d4693978b984f0639c90e508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0f143b8d4693978b984f0639c90e508">&#9670;&#160;</a></span>dropPoisonGeneratingRecipes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::dropPoisonGeneratingRecipes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1function__ref.html">function_ref</a>&lt; <a class="el" href="classbool.html">bool</a>(<a class="el" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *)&gt;</td>          <td class="paramname"><span class="paramname"><em>BlockNeedsPredication</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Drop poison flags from recipes that may generate a poison value that is used after vectorization, even when their operands are not poison. </p>
<p>Those recipes meet the following conditions:</p><ul>
<li>Contribute to the address computation of a recipe generating a widen memory load/store (VPWidenMemoryInstructionRecipe or <a class="el" href="classllvm_1_1VPInterleaveRecipe.html" title="VPInterleaveRecipe is a recipe for transforming an interleave group of load or stores into one wide l...">VPInterleaveRecipe</a>).</li>
<li>Such a widen memory load/store has at least one underlying <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> that is in a basic block that needs predication and after vectorization the generated instruction won't be predicated. Uses <code>BlockNeedsPredication</code> to check if a block needs predicating. TODO: Replace BlockNeedsPredication callback with retrieving info from <a class="el" href="classllvm_1_1VPlan.html" title="VPlan models a candidate for vectorization, encoding various decisions take to produce efficient outp...">VPlan</a> directly. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l01495">1495</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="BuiltinGCs_8cpp.html#a3545a9491d4dcf823feb79f6eb37e3ee">A</a>, <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="BuiltinGCs_8cpp.html#a11d755651840a5529d15260aacde92f3">B</a>, <a class="el" href="VPlan_8h_source.html#l03862">llvm::VPBlockUtils::blocksOnly()</a>, <a class="el" href="Casting_8h_source.html#l00649">llvm::dyn_cast()</a>, <a class="el" href="Casting_8h_source.html#l00759">llvm::dyn_cast_or_null()</a>, <a class="el" href="SmallVector_8h_source.html#l00081">llvm::SmallVectorBase&lt; Size_T &gt;::empty()</a>, <a class="el" href="VPlan_8h_source.html#l03558">llvm::VPlan::getEntry()</a>, <a class="el" href="VectorUtils_8h_source.html#l00538">llvm::InterleaveGroup&lt; InstTy &gt;::getMember()</a>, <a class="el" href="VectorUtils_8h_source.html#l00486">llvm::InterleaveGroup&lt; InstTy &gt;::getNumMembers()</a>, <a class="el" href="ilist__node_8h_source.html#l00032">llvm::ilist_detail::node_parent_access&lt; NodeTy, ParentTy &gt;::getParent()</a>, <a class="el" href="VPlanValue_8h_source.html#l00077">llvm::VPValue::getUnderlyingValue()</a>, <a class="el" href="VPlanValue_8h_source.html#l00397">llvm::VPDef::getVPSingleValue()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, <a class="el" href="SmallPtrSet_8h_source.html#l00367">llvm::SmallPtrSetImpl&lt; PtrType &gt;::insert()</a>, <a class="el" href="Casting_8h_source.html#l00548">llvm::isa()</a>, <a class="el" href="PatternMatch_8h_source.html#l00049">llvm::PatternMatch::match()</a>, <a class="el" href="VPlanValue_8h_source.html#l00270">llvm::VPUser::operands()</a>, <a class="el" href="SmallVector_8h_source.html#l00673">llvm::SmallVectorImpl&lt; T &gt;::pop_back_val()</a>, <a class="el" href="SmallVector_8h_source.html#l00413">llvm::SmallVectorTemplateBase&lt; T, bool &gt;::push_back()</a>, and <a class="el" href="VPlanCFG_8h_source.html#l00226">llvm::vp_depth_first_deep()</a>.</p>

</div>
</div>
<a id="ae3449b993cd1c459995c2fe13ef50892" name="ae3449b993cd1c459995c2fe13ef50892"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3449b993cd1c459995c2fe13ef50892">&#9670;&#160;</a></span>optimize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::optimize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply VPlan-to-VPlan optimizations to <code>Plan</code>, including induction recipe optimizations, dead recipe removal, replicate region optimizations and block merging. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l01155">1155</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="VPlanTransforms_8cpp_source.html#l00407">createAndOptimizeReplicateRegions()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00576">legalizeAndOptimizeInductions()</a>, <a class="el" href="LICM_8cpp_source.html#l00379">licm</a>, <a class="el" href="LoopSimplifyCFG_8cpp_source.html#l00660">mergeBlocksIntoPredecessors()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00513">removeDeadRecipes()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00458">removeRedundantCanonicalIVs()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00632">removeRedundantExpandSCEVRecipes()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00425">removeRedundantInductionCasts()</a>, and <a class="el" href="VPlanTransforms_8cpp_source.html#l01009">simplifyRecipes()</a>.</p>

<p class="reference">Referenced by <a class="el" href="VPlan_8cpp_source.html#l01657">llvm::LoopVectorizationPlanner::buildVPlans()</a>.</p>

</div>
</div>
<a id="af25d938764b8634e70e95ff3f0c35129" name="af25d938764b8634e70e95ff3f0c35129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af25d938764b8634e70e95ff3f0c35129">&#9670;&#160;</a></span>optimizeForVFAndUF()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::optimizeForVFAndUF </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ElementCount.html">ElementCount</a></td>          <td class="paramname"><span class="paramname"><em>BestVF</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classunsigned.html">unsigned</a></td>          <td class="paramname"><span class="paramname"><em>BestUF</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1PredicatedScalarEvolution.html">PredicatedScalarEvolution</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>PSE</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Optimize <code>Plan</code> based on <code>BestVF</code> and <code>BestUF</code>. </p>
<p>This may restrict the resulting plan to <code>BestVF</code> and <code>BestUF</code>. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l00668">668</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="VPlan_8h_source.html#l03236">llvm::VPBasicBlock::appendRecipe()</a>, <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="VPlan_8h_source.html#l03210">llvm::VPBasicBlock::back()</a>, <a class="el" href="VPlan_8h_source.html#l01237">llvm::VPInstruction::BranchOnCond</a>, <a class="el" href="CallingConv_8h_source.html#l00034">llvm::CallingConv::C</a>, <a class="el" href="ScalarEvolution_8h_source.html#l00488">llvm::ScalarEvolution::getContext()</a>, <a class="el" href="ScalarEvolution_8cpp_source.html#l00512">llvm::ScalarEvolution::getElementCount()</a>, <a class="el" href="VPlan_8cpp_source.html#l00183">llvm::VPBlockBase::getExitingBasicBlock()</a>, <a class="el" href="VPlan_8h_source.html#l03632">llvm::VPlan::getOrAddLiveIn()</a>, <a class="el" href="VPlanUtils_8cpp_source.html#l00065">llvm::vputils::getSCEVExprForVPValue()</a>, <a class="el" href="ScalarEvolution_8h_source.html#l02396">llvm::PredicatedScalarEvolution::getSE()</a>, <a class="el" href="VPlan_8h_source.html#l03562">llvm::VPlan::getTripCount()</a>, <a class="el" href="Constants_8cpp_source.html#l00849">llvm::ConstantInt::getTrue()</a>, <a class="el" href="ScalarEvolution_8cpp_source.html#l00380">llvm::SCEV::getType()</a>, <a class="el" href="VPlan_8h_source.html#l03666">llvm::VPlan::getVectorLoopRegion()</a>, <a class="el" href="VPlan_8h_source.html#l03612">llvm::VPlan::hasUF()</a>, <a class="el" href="VPlan_8h_source.html#l03599">llvm::VPlan::hasVF()</a>, <a class="el" href="InstrTypes_8h_source.html#l00699">llvm::CmpInst::ICMP_ULE</a>, <a class="el" href="Casting_8h_source.html#l00548">llvm::isa()</a>, <a class="el" href="ScalarEvolution_8cpp_source.html#l10992">llvm::ScalarEvolution::isKnownPredicate()</a>, <a class="el" href="ScalarEvolution_8cpp_source.html#l00442">llvm::SCEV::isZero()</a>, <a class="el" href="PatternMatch_8h_source.html#l02395">llvm::PatternMatch::m_Not()</a>, <a class="el" href="PatternMatch_8h_source.html#l00049">llvm::PatternMatch::match()</a>, <a class="el" href="TypeSize_8h_source.html#l00258">llvm::details::FixedOrScalableQuantity&lt; LeafTy, ValueTy &gt;::multiplyCoefficientBy()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00649">recursivelyDeleteDeadRecipes()</a>, <a class="el" href="VPlan_8h_source.html#l03619">llvm::VPlan::setUF()</a>, and <a class="el" href="VPlan_8h_source.html#l03593">llvm::VPlan::setVF()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopVectorize_8cpp_source.html#l07500">llvm::LoopVectorizationPlanner::executePlan()</a>.</p>

</div>
</div>
<a id="aaca9dd97d4c523d8c65274654abe4eb9" name="aaca9dd97d4c523d8c65274654abe4eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaca9dd97d4c523d8c65274654abe4eb9">&#9670;&#160;</a></span>removeDeadRecipes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::removeDeadRecipes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove dead recipes from <code>Plan</code>. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l00513">513</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="VPlan_8h_source.html#l03862">llvm::VPBlockUtils::blocksOnly()</a>, <a class="el" href="VPlan_8h_source.html#l03558">llvm::VPlan::getEntry()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00494">isDeadRecipe()</a>, <a class="el" href="STLExtras_8h_source.html#l00656">llvm::make_early_inc_range()</a>, and <a class="el" href="STLExtras_8h_source.html#l00419">llvm::reverse()</a>.</p>

<p class="reference">Referenced by <a class="el" href="VPlanTransforms_8cpp_source.html#l01155">optimize()</a>, and <a class="el" href="VPlanUnroll_8cpp_source.html#l00396">unrollByUF()</a>.</p>

</div>
</div>
<a id="ae61793492431f138869f097a5f31bd32" name="ae61793492431f138869f097a5f31bd32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae61793492431f138869f097a5f31bd32">&#9670;&#160;</a></span>truncateToMinimalBitwidths()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::truncateToMinimalBitwidths </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1MapVector.html">MapVector</a>&lt; <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="el" href="classuint64__t.html">uint64_t</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>MinBWs</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert truncates and extends for any truncated recipe. </p>
<p>Redundant casts will be folded later. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l01021">1021</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="STLExtras_8h_source.html#l01723">llvm::all_of()</a>, <a class="el" href="VPlan_8h_source.html#l03236">llvm::VPBasicBlock::appendRecipe()</a>, <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="VPlan_8h_source.html#l03862">llvm::VPBlockUtils::blocksOnly()</a>, <a class="el" href="Casting_8h_source.html#l00720">llvm::cast_or_null()</a>, <a class="el" href="DenseMap_8h_source.html#l00147">llvm::DenseMapBase&lt; DerivedT, KeyT, ValueT, KeyInfoT, BucketT &gt;::contains()</a>, <a class="el" href="MapVector_8h_source.html#l00163">llvm::MapVector&lt; KeyT, ValueT, MapType, VectorType &gt;::contains()</a>, <a class="el" href="Casting_8h_source.html#l00649">llvm::dyn_cast()</a>, <a class="el" href="Casting_8h_source.html#l00759">llvm::dyn_cast_or_null()</a>, <a class="el" href="SandboxIR_2Type_8cpp_source.html#l00275">llvm::IntegerType::get()</a>, <a class="el" href="VPlan_8h_source.html#l03674">llvm::VPlan::getCanonicalIV()</a>, <a class="el" href="IR_2Type_8h_source.html#l00128">llvm::Type::getContext()</a>, <a class="el" href="VPlan_8h_source.html#l03558">llvm::VPlan::getEntry()</a>, <a class="el" href="SandboxIR_2Type_8cpp_source.html#l00199">llvm::Type::getScalarSizeInBits()</a>, <a class="el" href="VPlan_8h_source.html#l02927">llvm::VPCanonicalIVPHIRecipe::getScalarType()</a>, <a class="el" href="VPlanValue_8h_source.html#l00077">llvm::VPValue::getUnderlyingValue()</a>, <a class="el" href="VPlan_8h_source.html#l03666">llvm::VPlan::getVectorLoopRegion()</a>, <a class="el" href="VPlanAnalysis_8cpp_source.html#l00236">llvm::VPTypeAnalysis::inferScalarType()</a>, <a class="el" href="DenseMap_8h_source.html#l00211">llvm::DenseMapBase&lt; DerivedT, KeyT, ValueT, KeyInfoT, BucketT &gt;::insert()</a>, <a class="el" href="VPlanRecipes_8cpp_source.html#l00234">llvm::VPRecipeBase::insertBefore()</a>, <a class="el" href="Casting_8h_source.html#l00548">llvm::isa()</a>, <a class="el" href="IR_2Type_8h_source.html#l00224">llvm::Type::isIntegerTy()</a>, <a class="el" href="MapVector_8h_source.html#l00110">llvm::MapVector&lt; KeyT, ValueT, MapType, VectorType &gt;::lookup()</a>, <a class="el" href="STLExtras_8h_source.html#l00656">llvm::make_early_inc_range()</a>, <a class="el" href="PatternMatch_8h_source.html#l00049">llvm::PatternMatch::match()</a>, <a class="el" href="VPlan_8cpp_source.html#l01457">llvm::VPValue::replaceAllUsesWith()</a>, <a class="el" href="MapVector_8h_source.html#l00060">llvm::MapVector&lt; KeyT, ValueT, MapType, VectorType &gt;::size()</a>, and <a class="el" href="VPlanCFG_8h_source.html#l00226">llvm::vp_depth_first_deep()</a>.</p>

</div>
</div>
<a id="a00b8c570e70b203b954d1240f3abfc8f" name="a00b8c570e70b203b954d1240f3abfc8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b8c570e70b203b954d1240f3abfc8f">&#9670;&#160;</a></span>tryAddExplicitVectorLength()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> VPlanTransforms::tryAddExplicitVectorLength </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a <a class="el" href="classllvm_1_1VPEVLBasedIVPHIRecipe.html" title="A recipe for generating the phi node for the current index of elements, adjusted in accordance with E...">VPEVLBasedIVPHIRecipe</a> and related recipes to <code>Plan</code> and replaces all uses except the canonical IV increment of <a class="el" href="classllvm_1_1VPCanonicalIVPHIRecipe.html" title="Canonical scalar induction phi of the vector loop.">VPCanonicalIVPHIRecipe</a> with a <a class="el" href="classllvm_1_1VPEVLBasedIVPHIRecipe.html" title="A recipe for generating the phi node for the current index of elements, adjusted in accordance with E...">VPEVLBasedIVPHIRecipe</a>. </p>
<p><a class="el" href="classllvm_1_1VPCanonicalIVPHIRecipe.html" title="Canonical scalar induction phi of the vector loop.">VPCanonicalIVPHIRecipe</a> is only used to control the loop after this transformation. </p><dl class="section return"><dt>Returns</dt><dd>true if the transformation succeeds, or false if it doesn't.</dd></dl>
<p><a class="el" href="classllvm_1_1VPCanonicalIVPHIRecipe.html" title="Canonical scalar induction phi of the vector loop.">VPCanonicalIVPHIRecipe</a> is used only for loop iterations counting after this transformation.</p>
<p>The function uses the following definitions: StartV is the canonical induction start value.</p>
<p>The function adds the following recipes:</p>
<p>vector.ph: ...</p>
<p>vector.body: ... EVLPhi = EXPLICIT-VECTOR-LENGTH-BASED-IV-PHI [ StartV, vector.ph ], [ NextEVLIV, vector.body ] AVL = sub original TC, EVLPhi VPEVL = EXPLICIT-VECTOR-LENGTH AVL ... NextEVLIV = add IVSize (cast i32 VPEVVL to IVSize), EVLPhi ... </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l01432">1432</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="STLExtras_8h_source.html#l01730">llvm::any_of()</a>, <a class="el" href="Casting_8h_source.html#l00565">llvm::cast()</a>, <a class="el" href="namespacellvm_1_1dwarf__linker.html#a463a58e257d5f6fb2c39eb9a2474fc24ac2e06fc138163b7095fa483616a0a47a">llvm::dwarf_linker::DebugLoc</a>, <a class="el" href="VPlan_8h_source.html#l01227">llvm::VPInstruction::ExplicitVectorLength</a>, <a class="el" href="VPlan_8h_source.html#l03674">llvm::VPlan::getCanonicalIV()</a>, <a class="el" href="VPlan_8cpp_source.html#l00161">llvm::VPBlockBase::getEntryBasicBlock()</a>, <a class="el" href="VPlan_8h_source.html#l03562">llvm::VPlan::getTripCount()</a>, <a class="el" href="VPlan_8h_source.html#l03666">llvm::VPlan::getVectorLoopRegion()</a>, <a class="el" href="VPlanRecipes_8cpp_source.html#l00234">llvm::VPRecipeBase::insertBefore()</a>, <a class="el" href="VPlan_8h_source.html#l03619">llvm::VPlan::setUF()</a>, and <a class="el" href="VPlanTransforms_8cpp_source.html#l01353">transformRecipestoEVLRecipes()</a>.</p>

</div>
</div>
<a id="a7a1cca51bb9bce4efad1063dcf158967" name="a7a1cca51bb9bce4efad1063dcf158967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a1cca51bb9bce4efad1063dcf158967">&#9670;&#160;</a></span>unrollByUF()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::unrollByUF </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1VPlan.html">VPlan</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classunsigned.html">unsigned</a></td>          <td class="paramname"><span class="paramname"><em>UF</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Ctx</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Explicitly unroll <code>Plan</code> by <code>UF</code>. </p>

<p class="definition">Definition at line <a class="el" href="VPlanUnroll_8cpp_source.html#l00396">396</a> of file <a class="el" href="VPlanUnroll_8cpp_source.html">VPlanUnroll.cpp</a>.</p>

<p class="reference">References <a class="el" href="HexagonMCCodeEmitter_8cpp_source.html#l00047">_</a>, <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="VPlan_8h_source.html#l03862">llvm::VPBlockUtils::blocksOnly()</a>, <a class="el" href="VPlan_8h_source.html#l01235">llvm::VPInstruction::CanonicalIVIncrementForPart</a>, <a class="el" href="HTTPClient_8cpp_source.html#l00042">Cleanup</a>, <a class="el" href="Casting_8h_source.html#l00649">llvm::dyn_cast()</a>, <a class="el" href="VPlan_8h_source.html#l03558">llvm::VPlan::getEntry()</a>, <a class="el" href="VPlan_8cpp_source.html#l00161">llvm::VPBlockBase::getEntryBasicBlock()</a>, <a class="el" href="VPlan_8h_source.html#l03685">llvm::VPlan::getLiveOuts()</a>, <a class="el" href="VPlan_8h_source.html#l03699">llvm::VPlan::getPreheader()</a>, <a class="el" href="VPlan_8h_source.html#l03666">llvm::VPlan::getVectorLoopRegion()</a>, <a class="el" href="MD5_8cpp_source.html#l00057">H</a>, <a class="el" href="Casting_8h_source.html#l00548">llvm::isa()</a>, <a class="el" href="STLExtras_8h_source.html#l00656">llvm::make_early_inc_range()</a>, <a class="el" href="ScopeExit_8h_source.html#l00059">llvm::make_scope_exit()</a>, <a class="el" href="VPlan_8h_source.html#l03249">llvm::VPBasicBlock::phis()</a>, <a class="el" href="VPlanTransforms_8cpp_source.html#l00513">removeDeadRecipes()</a>, <a class="el" href="VPlan_8h_source.html#l03619">llvm::VPlan::setUF()</a>, and <a class="el" href="VPlanCFG_8h_source.html#l00226">llvm::vp_depth_first_deep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopVectorize_8cpp_source.html#l07500">llvm::LoopVectorizationPlanner::executePlan()</a>.</p>

</div>
</div>
<a id="ad210afaefb4884ac5008dd5fbaf1cbf8" name="ad210afaefb4884ac5008dd5fbaf1cbf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad210afaefb4884ac5008dd5fbaf1cbf8">&#9670;&#160;</a></span>VPInstructionsToVPRecipes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VPlanTransforms::VPInstructionsToVPRecipes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacellvm.html#aefc42f3cefc5a839ca925b4cb3ae4a7b">VPlanPtr</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Plan</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1function__ref.html">function_ref</a>&lt; <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1InductionDescriptor.html">InductionDescriptor</a> *(<a class="el" href="classllvm_1_1PHINode.html">PHINode</a> *)&gt;</td>          <td class="paramname"><span class="paramname"><em>GetIntOrFpInductionDescriptor</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>SE</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>TLI</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replaces the VPInstructions in <code>Plan</code> with corresponding widen recipes. </p>

<p class="definition">Definition at line <a class="el" href="VPlanTransforms_8cpp_source.html#l00034">34</a> of file <a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="VPlan_8h_source.html#l03862">llvm::VPBlockUtils::blocksOnly()</a>, <a class="el" href="Casting_8h_source.html#l00565">llvm::cast()</a>, <a class="el" href="Casting_8h_source.html#l00649">llvm::dyn_cast()</a>, <a class="el" href="HexagonCommonGEP_8cpp_source.html#l00171">GEP</a>, <a class="el" href="VPlanValue_8h_source.html#l00424">llvm::VPDef::getNumDefinedValues()</a>, <a class="el" href="VPlanUtils_8cpp_source.html#l00026">llvm::vputils::getOrCreateVPValueForSCEVExpr()</a>, <a class="el" href="VPlanValue_8h_source.html#l00077">llvm::VPValue::getUnderlyingValue()</a>, <a class="el" href="VectorUtils_8cpp_source.html#l00158">llvm::getVectorIntrinsicIDForCall()</a>, <a class="el" href="VPlanValue_8h_source.html#l00397">llvm::VPDef::getVPSingleValue()</a>, <a class="el" href="NVVMIntrRange_8cpp_source.html#l00052">II</a>, <a class="el" href="VPlanRecipes_8cpp_source.html#l00234">llvm::VPRecipeBase::insertBefore()</a>, <a class="el" href="Casting_8h_source.html#l00548">llvm::isa()</a>, <a class="el" href="STLExtras_8h_source.html#l00656">llvm::make_early_inc_range()</a>, <a class="el" href="iterator__range_8h_source.html#l00076">llvm::make_range()</a>, <a class="el" href="IR_2User_8h_source.html#l00288">llvm::User::operands()</a>, and <a class="el" href="VPlan_8cpp_source.html#l01457">llvm::VPValue::replaceAllUsesWith()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>lib/Transforms/Vectorize/<a class="el" href="VPlanTransforms_8h_source.html">VPlanTransforms.h</a></li>
<li>lib/Transforms/Vectorize/<a class="el" href="VPlanTransforms_8cpp_source.html">VPlanTransforms.cpp</a></li>
<li>lib/Transforms/Vectorize/<a class="el" href="VPlanUnroll_8cpp_source.html">VPlanUnroll.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 2 2024 14:47:21 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
