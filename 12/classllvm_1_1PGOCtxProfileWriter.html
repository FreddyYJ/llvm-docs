<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::PGOCtxProfileWriter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;20.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="classllvm_1_1PGOCtxProfileWriter.html">PGOCtxProfileWriter</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classllvm_1_1PGOCtxProfileWriter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">llvm::PGOCtxProfileWriter Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Write one or more ContextNodes to the provided <a class="el" href="classllvm_1_1raw__fd__stream.html" title="A raw_ostream of a file for reading/writing/seeking.">raw_fd_stream</a>.  
 <a href="#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="PGOCtxProfWriter_8h_source.html">llvm/ProfileData/PGOCtxProfWriter.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9e14ee9078852ac00c52462c0110b2f6" id="r_a9e14ee9078852ac00c52462c0110b2f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e14ee9078852ac00c52462c0110b2f6">PGOCtxProfileWriter</a> (<a class="el" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;Out, std::optional&lt; <a class="el" href="classunsigned.html">unsigned</a> &gt; VersionOverride=std::nullopt)</td></tr>
<tr class="separator:a9e14ee9078852ac00c52462c0110b2f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8219793abc9af652837cb67db88e9954" id="r_a8219793abc9af652837cb67db88e9954"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8219793abc9af652837cb67db88e9954">~PGOCtxProfileWriter</a> ()</td></tr>
<tr class="separator:a8219793abc9af652837cb67db88e9954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1815eac622ceabfe9d2e6bf0288b564" id="r_aa1815eac622ceabfe9d2e6bf0288b564"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1815eac622ceabfe9d2e6bf0288b564">write</a> (<a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ctx__profile_1_1ContextNode.html">ctx_profile::ContextNode</a> &amp;)</td></tr>
<tr class="separator:aa1815eac622ceabfe9d2e6bf0288b564"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:aa517b7b0fff8dec01ea1d4f2a120835a" id="r_aa517b7b0fff8dec01ea1d4f2a120835a"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classunsigned.html">unsigned</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa517b7b0fff8dec01ea1d4f2a120835a">CodeLen</a> = 2</td></tr>
<tr class="separator:aa517b7b0fff8dec01ea1d4f2a120835a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5085a773e7301c23235738d9cd38ef11" id="r_a5085a773e7301c23235738d9cd38ef11"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classuint32__t.html">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5085a773e7301c23235738d9cd38ef11">CurrentVersion</a> = 1</td></tr>
<tr class="separator:a5085a773e7301c23235738d9cd38ef11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dcbfac5963074dc8c24addba3776acb" id="r_a4dcbfac5963074dc8c24addba3776acb"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classunsigned.html">unsigned</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4dcbfac5963074dc8c24addba3776acb">VBREncodingBits</a> = 6</td></tr>
<tr class="separator:a4dcbfac5963074dc8c24addba3776acb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655e5b7398d33b96fb414894717f2d96" id="r_a655e5b7398d33b96fb414894717f2d96"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classllvm_1_1StringRef.html">StringRef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a655e5b7398d33b96fb414894717f2d96">ContainerMagic</a> = &quot;CTXP&quot;</td></tr>
<tr class="separator:a655e5b7398d33b96fb414894717f2d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Write one or more ContextNodes to the provided <a class="el" href="classllvm_1_1raw__fd__stream.html" title="A raw_ostream of a file for reading/writing/seeking.">raw_fd_stream</a>. </p>
<p>The caller must destroy the <a class="el" href="classllvm_1_1PGOCtxProfileWriter.html" title="Write one or more ContextNodes to the provided raw_fd_stream.">PGOCtxProfileWriter</a> object before closing the stream. The design allows serializing a bunch of contexts embedded in some other file. The overall format is:</p>
<p>[... other data written to the stream...] SubBlock(ProfileMetadataBlockID) Version SubBlock(ContextNodeBlockID) [RECORDS] SubBlock(ContextNodeBlockID) [RECORDS] [... more SubBlocks] EndBlock EndBlock</p>
<p>The "RECORDS" are bitsream records. The IDs are in CtxProfileCodes (except) for Version, which is just for metadata). All contexts will have Guid and Counters, and all but the roots have CalleeIndex. The order in which the records appear does not matter, but they must precede any subcontexts, because that helps keep the reader code simpler.</p>
<p>Subblock containment captures the context-&gt;subcontext relationship. The "next()" relationship in the raw profile, between call targets of indirect calls, are just modeled as peer subblocks where the callee index is the same.</p>
<p>Versioning: the writer may produce additional records not known by the reader. The version number indicates a more structural change. The current version, in particular, is set up to expect optional extensions like value profiling - which would appear as additional records. For example, value profiling would produce a new record with a new record ID, containing the profiled values (much like the counters) </p>

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8h_source.html#l00063">63</a> of file <a class="el" href="PGOCtxProfWriter_8h_source.html">PGOCtxProfWriter.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9e14ee9078852ac00c52462c0110b2f6" name="a9e14ee9078852ac00c52462c0110b2f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e14ee9078852ac00c52462c0110b2f6">&#9670;&#160;</a></span>PGOCtxProfileWriter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PGOCtxProfileWriter::PGOCtxProfileWriter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>Out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; <a class="el" href="classunsigned.html">unsigned</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>VersionOverride</em></span><span class="paramdefsep"> = </span><span class="paramdefval">std::nullopt</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8cpp_source.html#l00021">21</a> of file <a class="el" href="PGOCtxProfWriter_8cpp_source.html">PGOCtxProfWriter.cpp</a>.</p>

<p class="reference">References <a class="el" href="PGOCtxProfWriter_8h_source.html#l00022">llvm::CalleeIndex</a>, <a class="el" href="PGOCtxProfWriter_8h_source.html#l00081">ContainerMagic</a>, <a class="el" href="PGOCtxProfWriter_8h_source.html#l00026">llvm::ContextNodeBlockID</a>, <a class="el" href="PGOCtxProfWriter_8h_source.html#l00022">llvm::Counters</a>, <a class="el" href="InstrProf_8h_source.html#l00189">llvm::Data</a>, <a class="el" href="StringRef_8h_source.html#l00143">llvm::StringRef::data()</a>, <a class="el" href="BitstreamWriter_8h_source.html#l00663">llvm::BitstreamWriter::EnterBlockInfoBlock()</a>, <a class="el" href="PGOCtxProfWriter_8h_source.html#l00022">llvm::Guid</a>, <a class="el" href="ELFObjHandler_8cpp_source.html#l00077">Name</a>, <a class="el" href="PGOCtxProfWriter_8h_source.html#l00025">llvm::ProfileMetadataBlockID</a>, <a class="el" href="StringRef_8h_source.html#l00149">llvm::StringRef::size()</a>, and <a class="el" href="raw__ostream_8cpp_source.html#l00227">llvm::raw_ostream::write()</a>.</p>

</div>
</div>
<a id="a8219793abc9af652837cb67db88e9954" name="a8219793abc9af652837cb67db88e9954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8219793abc9af652837cb67db88e9954">&#9670;&#160;</a></span>~PGOCtxProfileWriter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::PGOCtxProfileWriter::~PGOCtxProfileWriter </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8h_source.html#l00073">73</a> of file <a class="el" href="PGOCtxProfWriter_8h_source.html">PGOCtxProfWriter.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa1815eac622ceabfe9d2e6bf0288b564" name="aa1815eac622ceabfe9d2e6bf0288b564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1815eac622ceabfe9d2e6bf0288b564">&#9670;&#160;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PGOCtxProfileWriter::write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ctx__profile_1_1ContextNode.html">ctx_profile::ContextNode</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>RootNode</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8cpp_source.html#l00083">83</a> of file <a class="el" href="PGOCtxProfWriter_8cpp_source.html">PGOCtxProfWriter.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="PGOCtxProfWriter_8cpp_source.html#l00140">llvm::createCtxProfFromJSON()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa517b7b0fff8dec01ea1d4f2a120835a" name="aa517b7b0fff8dec01ea1d4f2a120835a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa517b7b0fff8dec01ea1d4f2a120835a">&#9670;&#160;</a></span>CodeLen</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classunsigned.html">unsigned</a> llvm::PGOCtxProfileWriter::CodeLen = 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8h_source.html#l00078">78</a> of file <a class="el" href="PGOCtxProfWriter_8h_source.html">PGOCtxProfWriter.h</a>.</p>

</div>
</div>
<a id="a655e5b7398d33b96fb414894717f2d96" name="a655e5b7398d33b96fb414894717f2d96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a655e5b7398d33b96fb414894717f2d96">&#9670;&#160;</a></span>ContainerMagic</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1StringRef.html">StringRef</a> llvm::PGOCtxProfileWriter::ContainerMagic = &quot;CTXP&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8h_source.html#l00081">81</a> of file <a class="el" href="PGOCtxProfWriter_8h_source.html">PGOCtxProfWriter.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="PGOCtxProfWriter_8cpp_source.html#l00021">PGOCtxProfileWriter()</a>.</p>

</div>
</div>
<a id="a5085a773e7301c23235738d9cd38ef11" name="a5085a773e7301c23235738d9cd38ef11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5085a773e7301c23235738d9cd38ef11">&#9670;&#160;</a></span>CurrentVersion</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classuint32__t.html">uint32_t</a> llvm::PGOCtxProfileWriter::CurrentVersion = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8h_source.html#l00079">79</a> of file <a class="el" href="PGOCtxProfWriter_8h_source.html">PGOCtxProfWriter.h</a>.</p>

</div>
</div>
<a id="a4dcbfac5963074dc8c24addba3776acb" name="a4dcbfac5963074dc8c24addba3776acb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dcbfac5963074dc8c24addba3776acb">&#9670;&#160;</a></span>VBREncodingBits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classunsigned.html">unsigned</a> llvm::PGOCtxProfileWriter::VBREncodingBits = 6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGOCtxProfWriter_8h_source.html#l00080">80</a> of file <a class="el" href="PGOCtxProfWriter_8h_source.html">PGOCtxProfWriter.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/llvm/ProfileData/<a class="el" href="PGOCtxProfWriter_8h_source.html">PGOCtxProfWriter.h</a></li>
<li>lib/ProfileData/<a class="el" href="PGOCtxProfWriter_8cpp_source.html">PGOCtxProfWriter.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 2 2024 14:45:00 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
